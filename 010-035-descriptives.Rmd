---
output: html_document
editor_options: 
  chunk_output_type: console
---
# Descriptive Statistics

## Introduction {#descriptives-intro}

Before starting the analysis of data, it is very important to understand it well using a few summarizing values - these are called descriptive calculations. R provides us with a wide range of functions to obtain the summary statistics. Some of them include mean, median, range, min, max, var, etc. We will explore these functions in depth using examples in this chapter.

## Learning Objectives {#descriptives-lo}

1. Understand the usage of functions that provide summary statistics in R
2. Implement the group_by() function using a dataset successfully

## Building the Pipeline

Start your work in a new script, clear your environment, and re-load your libraries.

::::: {.rBlock}
###### R {-}
```{r, results='hide'}
library(tidyverse)
```

```{r}
crop_subset <- read_csv("data/crop_filtered.csv")
```

```{r}
crop_subset
```
:::::

::::: {.pyBlock}
###### Python {-}
```{python}
import pandas as pd

crop_subset = pd.read_csv("data/crop_filtered.csv")
crop_subset
```
:::::

## Summary Statistics

Now that we have loaded the data, let us understand the summary statistics using the mean() function for the tumor dataset

::::: {.rBlock}
###### R {-}
```{r}
crop_subset %>%
  filter(N == 88) %>%
  pull(temperature)
```

```{r}
crop_subset %>%
  filter(N == 88) %>%
  pull(temperature) %>%
  mean()
  
```
:::::

::::: {.pyBlock}
###### Python {-}
```{python}
crop_subset.loc[crop_subset["N"] == 88, "temperature"]
```

```{python}
crop_subset.loc[crop_subset["N"] == 88, "temperature"].mean()
```

```{python}
(crop_subset
  .loc[crop_subset["N"] == 88, "temperature"]
  .mean()
)
```
:::::

::::: {.rBlock}
###### R {-}

```{r}
crop_subset %>%
  filter(label == 'rice', N == 88) %>%
  pull(temperature) %>%
  mean()
```

```{r}
crop_subset %>%
  filter(label == 'maize', N == 88) %>%
  pull(temperature) %>%
  mean()
```

```{r}
crop_subset %>%
  filter(label == 'chickpea', N == 88) %>%
  pull(temperature) %>%
  mean()
```

```{r}
crop_subset %>%
  filter(label == 'kidneybeans', N == 88) %>%
  pull(temperature) %>%
  mean()
```

```{r}
crop_subset %>%
  pull(label) %>%
  unique()
```
:::::

::::: {.pyBlock}
###### Python {-}
```{python}
(crop_subset
  .loc[crop_subset["label"] == 'rice', "temperature"]
  .mean()
)
```

```{python}
(crop_subset
  .loc[crop_subset["label"] == 'maize', "temperature"]
  .mean()
)
```

```{python}
(crop_subset
  .loc[crop_subset["label"] == 'chickpea', "temperature"]
  .mean()
)
```

```{python}
(crop_subset
  .loc[crop_subset["label"] == 'kidneybeans', "temperature"]
  .mean()
)
```

```{python}
(crop_subset
  .loc[:, "label"]
  .unique()
)
```
:::::

## Groupby Operations

The group_by() function is used to group the dataframe. An example is shown below using the tumor dataset.

::::: {.rBlock}
###### R {-}
```{r}
crop_subset %>%
  filter(N == 88) %>%
  group_by(label) %>%
  summarize(avg_temp = mean(temperature))
  
```
:::::

::::: {.pyBlock}
###### Python {-}
```{python}
(crop_subset
  .loc[crop_subset["N"] == 88]
  .groupby("label")
  .mean()
)
```

```{python}
(crop_subset
  .loc[crop_subset["N"] == 88]
  .groupby("label")
  ["temperature"]
  .mean()
)
```

```{python}
import numpy as np

(crop_subset
  .loc[crop_subset["N"] == 88]
  .groupby("label")
  ["temperature"]
  .agg(avg_temp = np.mean)
)
```

```{python}
(crop_subset
  .loc[crop_subset["N"] == 88]
  .groupby("label")
  .agg(avg_temp = ("temperature", np.mean))
)
```
:::::

::::: {.rBlock}
###### R {-}
```{r}
crop_subset %>%
  group_by(label, N) %>%
  summarize(avg_temp = mean(temperature),
            sd_temp = sd(temperature),
            q1 = quantile(temperature, probs = .25)
            )
```
:::::

::::: {.pyBlock}
###### Python {-}
```{python}
(crop_subset
  .groupby(["label", "N"])
  .agg(avg_temp = ("temperature", np.mean),
       std_temp = ("temperature", np.std),
       q25_temp = ("temperature", lambda x: np.quantile(x, q=.25)))
)
```

```{python}
(crop_subset
  .groupby(["label", "N"])
  .agg(avg_temp = ("temperature", np.mean),
       std_temp = ("temperature", np.std),
       q25_temp = ("temperature", lambda x: np.quantile(x, q=.25)))
  .reset_index()
)
```
:::::

## Summary {#descriptives-summary}

- Summary statistics is key to understanding the center, spread and other important quantities of the data
- Group_by function is used to group the dataframe

## Additional Resources {#descriptives-resources}
